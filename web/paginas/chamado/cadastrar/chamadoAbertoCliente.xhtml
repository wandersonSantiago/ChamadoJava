<ui:composition xmlns="http://www.w3.org/1999/xhtml"  
                xmlns:h="http://java.sun.com/jsf/html"  
                xmlns:f="http://java.sun.com/jsf/core"  
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" template="/templates/default/main.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="central">  

        <h:form>

            <div class="panel panel-primary">
                <div class="panel-heading" style="background-color:  #1E90FF">
                    <h3 class="panel-title" style="color: white" >Chamado Tecnologia da Informação</h3>
                </div>
                <div class="panel-footer" style="background-color: white">
                    <div class="input-group">

                        <p:panelGrid columns="7" style="width: 100%" >
                            <h:panelGrid columns="2" >
                                <div>
                                    <h:outputLabel value="Numero:"/>
                                </div>
                                <div>
                                    <h:outputLabel value="#{ctrChamado.chamadoc.id}"/>
                                </div>
                            </h:panelGrid>
                            <h:panelGrid columns="2" >
                                <div>
                                    <h:outputLabel value="Data:" />
                                </div>
                                <div>
                                    <h:outputLabel value="#{ctrChamado.chamadoc.data}">
                                        <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"/>
                                    </h:outputLabel>
                                </div>
                            </h:panelGrid>
                            <h:panelGrid columns="2" >
                                <div>
                                    <h:outputLabel value="Data Encerramento:"/>  
                                </div>
                                <div>
                                    <h:outputLabel value="#{ctrChamado.chamadoc.datafechamento}"/>
                                </div>
                            </h:panelGrid>
                            <h:panelGrid columns="2" >

                                <div>
                                    <h:outputLabel value="Status:" /> 
                                </div>
                                <div>
                                    <h:outputLabel value="#{ctrChamado.chamadoc.status}"/>
                                    <f:selectItem itemLabel="Urgente" itemValue="1" />
                                    <f:selectItem itemLabel="Media" itemValue="2" />
                                    <f:selectItem itemLabel="Baixa" itemValue="3" />
                                </div>
                            </h:panelGrid>
                            <h:panelGrid columns="1">
                                <p:outputLabel value="Prioridade:"/>
                                <p:selectOneMenu id="prioridade" value="#{ctrChamado.chamadoc.prioridade}" label="priori"  
                                                 required="false" requiredMessage="Campo prioridade obrigatorio" >
                                    <f:selectItem itemLabel="-Selecione-" itemValue="" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Urgente" itemValue="1" />
                                    <f:selectItem itemLabel="Media" itemValue="2" />
                                    <f:selectItem itemLabel="Baixa" itemValue="3" />
                                </p:selectOneMenu>
                            </h:panelGrid>
                            <h:panelGrid columns="1">
                                <p:outputLabel value="Categoria"/>
                                <p:selectOneMenu id="categoria" value="#{ctrChamado.chamadoc.categoria}" label="priori"  
                                                 required="false" requiredMessage="Campo categoria obrigatorio" >
                                    <f:selectItem itemLabel="-Selecione-" itemValue="" noSelectionOption="true" />
                                    <f:selectItem itemLabel="duvida" itemValue="1" />
                                    <f:selectItem itemLabel="problema" itemValue="2" />
                                    <f:selectItem itemLabel="solicitação de serviços" itemValue="3" />
                                    <f:selectItem itemLabel="sugestões" itemValue="4" />
                                </p:selectOneMenu>
                            </h:panelGrid>

                            <h:panelGrid columns="2">
                                <div>
                                    <h:outputLabel value="Atendido po:" />
                                </div>

                                <div>
                                    <h:outputLabel value="#{ctrChamado.chamadoc.codfuncatend}"/>
                                </div>
                            </h:panelGrid>

                        </p:panelGrid>
                        <div>
                            <h:outputLabel value="Titulo:" style="font-weight: bold; font-size: 20px" />
                        </div>
                        <div>
                            <h:outputLabel value="#{ctrChamado.chamadoc.titulo}" style="font-weight: bold; font-size: 20px" />
                        </div>
                        <p:inputText  id="nome" style="width: 100%"  size="300" required="true" value="#{mensagem.texto}"   /></div>

                    <h:panelGrid columns="2" > 
                        <h:commandButton value="Enviar Teste" action="#{CtrMensagem.gravarMensagem}" class="btn-default" style="min-width: 200px; min-height: 50px; background-color: #1E90FF; color: white">
                            <f:setPropertyActionListener value="#{ctrChamado.chamadoc}" target="#{CtrMensagem.chamadoc}" />
                            <f:setPropertyActionListener value="#{mensagem}" target="#{CtrMensagem.mensagem}" />
                            
                        </h:commandButton>

                    </h:panelGrid>
                    <p:separator/>
                    <div>
                        <h:outputLabel value="Mensagens" style="font-weight: bold; font-size: 20px" />
                    </div>
                    <p:separator style="color: black"/>
                </div>

                <p:dataScroller value="#{CtrMensagem.carregarMensagem(ctrChamado.chamadoc)}" var="mensagem" chunkSize="10" style="background-color: white">
                    <h:panelGrid columns="1" style="width:100%; background-color: white" columnClasses="detail,detail">


                        <p:outputPanel style="background-color: white">
                            <h:panelGrid columns="1" cellpadding="5" style="background-color: white">
                                <h:outputLabel value=" data: #{mensagem.data}">
                                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"/>
                                </h:outputLabel>
                                <h:outputText value=" Por: #{mensagem.codfuncautor.nome}"   style=" font-size: 20px; color: blue" />

                                <h:outputText value="#{mensagem.texto}" style=" font-size: 20px; color: black"/>
                            </h:panelGrid>
                            <p:separator style="color: black; background-color: black"/>
                            <br/>
                        </p:outputPanel>
                    </h:panelGrid>
                </p:dataScroller>
            </div>


        </h:form>


    </ui:define>
</ui:composition>

